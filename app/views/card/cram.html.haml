=render :partial => '/header', :locals => {:title => t('deck.learn.title.old'), :subtitle => ''}

%section{:class => ["panel"]}
  =render :partial => '/card/show', :locals => {:card => @card, :pronunciation_side => @deck.pronunciation_side, :supports_typed_answer => @deck.supports_written_answer}
  
- unless @card.nil?
  #reveal_button
    .panel
      .button{:class => "centre big_button"}
        = link_to t('actions.reveal'), '#', :class => 'positive', :id => "do_reveal"
      .pad_from_top

  #review_buttons{:class => "hidden"}
    .panel
      .button{:class => "centre large_button"}
        %ul
          %li{:class => 'left inline-block centre'}
            = link_to t('actions.next'), cram_deck_chapter_path(:deck_id => @deck.id, :id => @card.chapter, :card_id => @card.id), :id => "do_next", :class => 'large positive inline-block', :method => :get, :style => 'width:12em;'
        .pad_from_top
        .pad

:javascript
  $j('html').keypress(function(event) {
    if (event.which == '32')
    {
      if ($j('#do_reveal').is(":visible"))
      {
        $j('#do_reveal').click();
      }
      else
      {
        $j('#do_next').click();
      }
    }
  });

  $j('#do_reveal').click(function(event) {
    $j("#back_of_card").show();
    $j("#reveal_button").hide();
    $j("#review_buttons").show();
  });